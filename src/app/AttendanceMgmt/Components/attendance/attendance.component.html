
<div class="container mt-4">
    <div class="row justify-content-start">
      <div class="col-md-6 text">
        <h2>Attendance</h2>
      </div>
    </div>
    <div class="row justify-content-start">
      <div class="col-md-3">
        <div class="form-group">
          <label for="filterDropdown">Platform:</label>
          <select id="filterDropdown" [(ngModel)]="selectedFilter" class="form-control"
            (change)="applyFilter(selectedFilter)">
            <option value='0' selected>--Select--</option>
            <option *ngFor="let option of filterOptions" [value]="option.platform">{{ option.platform }}</option>
          </select>
        </div>
      </div>
      <!-- <div class="col-md-3">
        <div class="form-group">
          <label for="date">Date:</label>
          <input id="date" class="form-control" type="date" (change)="applyFilter(selectedFilter)"
            [(ngModel)]="selectedDate" [attr.max]="maxDate" />
        </div>
      </div>   -->
  
      <div class="col-md-3">
        <div class="form-group">
          <label for="date">Date:</label>
          <div class="input-group">
          <input id="date" class="form-control" type="text" (ngModelChange)="onDateChange($event)" bsDatepicker
            [(ngModel)]="selectedDate" [maxDate]="maxDate" [bsConfig]="bsConfig" />
            
            <span class="input-group-text"><i class="material-icons">date_range</i></span>
  
            
        </div>
        </div>
      </div>
  
    </div>
  
    <div class="container mt-4">
      <div class="row justify-content-start" *ngIf="selectedFilter !== '0'">
        <div class="col-md-12">
          <div class="container" *ngIf="isPresents">
            <table class="table table-bordered">
              <thead>
                <tr>
                  <th>Resource Name</th>
                  <th>Platform</th>
                  <th>
                    <!-- [checked]="!checkBoxFirst" -->
                    <input type="hidden" value={{uncheckCheckbox1}}>
                    <input type="checkbox" class="form-check-input" [checked]="!uncheckCheckbox1"
                      (change)="checkAllFirst($event)" />
                    First Half
                  </th>
                  <th>
                    <!-- [checked]="!checkBoxSecond" -->
                    <input type="hidden" value={{uncheckCheckbox2}}>
                    <input type="checkbox" class="form-check-input" [checked]="!uncheckCheckbox2"
                      (change)="checkAllSecondHalf($event)" />
                    Second Half
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let detail of attendanceDetails">
                  <td>{{ detail.resourceName }}</td>
                  <td>{{ detail.domain }}</td>
                  <td>
                    <div *ngFor="let firstHalfObj of detail.firstHalf" class="form-check">
                      <input type="checkbox" class="form-check-input" [checked]="firstHalfObj.isPresent === '1'"
                        (change)="togglePresentValue(firstHalfObj)" />
                      <label class="form-check-label">
                        {{ firstHalfObj.activityName }} ({{ firstHalfObj.activityDetails }}) <br />
                        Time: {{ firstHalfObj.fromHours }} to {{ firstHalfObj.toHours }}
                      </label>
                      <input type="hidden" [value]="firstHalfObj.activityAllocateDetId">
                      <input type="hidden" [value]="firstHalfObj.isPresent">
                    </div>
                  </td>
                  <td>
                    <div *ngFor="let secondHalfObj of detail.secondHalf" class="form-check">
                      <input type="checkbox" class="form-check-input" [checked]="secondHalfObj.isPresent === '1'"
                        (change)="togglePresentValue(secondHalfObj)" />
                      <label class="form-check-label">
                        {{ secondHalfObj.activityName }} ({{ secondHalfObj.activityDetails }}) <br />
                        Time: {{ secondHalfObj.fromHours }} to {{ secondHalfObj.toHours }}
                      </label>
                      <input type="hidden" [value]="secondHalfObj.activityAllocateDetId">
                      <input type="hidden" [value]="secondHalfObj.isPresent">
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="row justify-content-center mt-4" *ngIf="!isPresents && selectedDate">
            <div class="col-md-6 text-center">
              <p>No activity plan scheduled for this date !</p>
            </div>
          </div>
        </div>
      </div>
  
      <input type="hidden" value="{{isPresents}}">
      <div class="row justify-content-center mt-4" *ngIf="selectedFilter !== '0' && isPresents">
        <div class="col-md-3 text-center">
          <button type="button" class="btn btn-success" (click)="submitForm()">
            {{ status === 's' ? 'Save Attendance' : 'Update Attendance' }}
          </button>
        </div>
      </div>
  
    </div>
  </div>