<div class="container">
  <h2 class="page-title">View Assessment Details</h2>

  <!-- Filter Section -->
  <div class="filter-section">
    <div class="row">
      <div class="form-group col-md-3">
        <label for="year">Year</label>
        <select class="form-control" id="year" [(ngModel)]="selectedYear" >
          <option *ngFor="let year of years" [value]="year">{{ year }}</option>
        </select>
      </div>
      <div class="form-group col-md-3">
        <label for="month">Month</label>
        <select class="form-control" id="month" [(ngModel)]="selectedMonth" (change)="updateAssessmentTable()" (change)="fetchAssessments()">
          <option *ngFor="let month of months; let i = index" [value]="i">{{ month }}</option>
        </select>
      </div>
    </div>
  </div>

  


   <!-- Report Section -->
   <div class="row">
    <div class="col-md-6">
      
    </div>
    <div class="col-md-6 text-right">
      <div class="export-buttons">
        <button *ngIf="showAssessmentTable" (click)="exportToPDF()" class="btn btn-icon export-btn" title="Download PDF">
          <i class="fas fa-file-pdf fa-lg pdf-icon"></i>
        </button>
        
        <button *ngIf="showAssessmentTable" (click)="exportToExcel()" class="btn btn-icon export-btn" title="Download Excel">
          <i class="fas fa-file-excel fa-lg excel-icon"></i>
        </button>
      </div>
    </div>
  </div>
  <!-- Accordion Section -->
  <div class="accordion" id="dateAccordion">
    <!-- Accordion Items -->
    <div class="card" *ngFor="let week of weeks">
      <div class="card-header" [attr.id]="'week' + week.start.getTime()">
        <h2 class="mb-0">
          <button class="btn btn-link" type="button" (click)="toggleCollapse(week.start.getTime())" [attr.aria-controls]="'weekCollapse' + week.start.getTime()" [attr.aria-expanded]="!isCollapsed(week.start.getTime())">
            {{ formatWeekRange(week) }}
          </button>
        </h2>
      </div>
  
      <!-- Collapsible Content -->
      <div [id]="'weekCollapse' + week.start.getTime()" class="collapse" [class.show]="!isCollapsed(week.start.getTime())" [attr.aria-labelledby]="'week' + week.start.getTime()" data-parent="#dateAccordion">
        <div class="card-body">
          <!-- Assessment Table -->
          <div *ngIf="showAssessmentTable">
            <!-- Render assessment table based on date range -->
            <table class="table table-striped table-bordered">
              <thead>
                <tr>
                  <th>Sl.No</th>
                  <th>Resource Name</th>
                  <th>Platform Name</th>
                  <th>Activity Name</th>
                  <th>Total Marks</th>
                  <th>Secured Marks</th>
                  <th>Remarks</th>
                  <th class="text-center">Action</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let assessment of getCurrentPageAssessments(); let i = index">
                  <td>{{ (currentPage - 1) * itemsPerPage + i + 1 }}</td>
                  <td>{{ assessment[0] }}</td>
                  <td>{{ assessment[1] }}</td>
                  <td>{{ assessment[2] }}</td>
                  <td>{{ assessment[3] }}</td>
                  <td>{{ assessment[4] }}</td>
                  <td>{{ assessment[5] }}</td>
                  <td class="text-center">
                    <button class="btn btn-primary" [routerLink]="['/editassesment', assessment[6]]">Edit</button>
                    <span class="button-spacing"></span>
                    <button class="btn btn-danger delete-button" (click)="deleteAssessment(assessment[6])">Delete</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Pagination -->
  <!-- <nav aria-label="Page navigation">
    <ul class="pagination justify-content-end">
      <li class="page-item" [class.disabled]="currentPage === 1">
        <button class="page-link" (click)="goToPreviousPage()" aria-label="Previous">
          <span aria-hidden="true">Prev &laquo;</span>
        </button>
      </li>
      <li class="page-item" *ngFor="let page of getPageNumbers()" [class.active]="currentPage === page">
        <button class="page-link" (click)="goToPage(page)">{{ page }}</button>
      </li>
      <li class="page-item" [class.disabled]="currentPage === getTotalPages()">
        <button class="page-link" (click)="goToNextPage()" aria-label="Next">
          <span aria-hidden="true">Next &raquo;</span>
        </button>
      </li>
    </ul>
  </nav> -->

 

</div>
