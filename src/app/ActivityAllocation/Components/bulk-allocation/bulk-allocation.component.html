<div class="container">
    <h2>Bulk Activity Allocation Form</h2>

    <div class="form-group">
        <label for="session">Activity for:</label>
        <select id="session" class="form-control" [(ngModel)]="selectedSession">
            <option value="1">1st half</option>
            <option value="2">2nd half</option>
        </select>
    </div>

    <div class="form-group">
        <label for="activity">Activity:</label>
        <select id="activity" class="form-control"  (change)="onActivitySelect($event)">
            <option *ngFor="let activity of activities" [value]="activity.activityId">
                {{activity.activityName}}
            </option>
        </select>
    </div>

    <div class="form-group">
        <label for="selectedActivityFrom">Activity from:</label>
        <input type="time" class="form-control" [(ngModel)]="selectedActivityFrom">
    </div>

    <div class="form-group">
        <label for="selectedActivityTo">Activity to:</label>
        <input type="time" class="form-control" [(ngModel)]="selectedActivityTo">
    </div>

    <div class="form-group">
        <label for="selectedDetails">Activity Details:</label>
        <textarea class="form-control" [(ngModel)]="selectedDetails"></textarea>
    </div>

    <button class="btn btn-primary" (click)="addMore()">Add more</button>

    <table class="table mt-3">
        <thead>
            <tr>
                <th>Session</th>
                <th>Training</th>
                <th>Activity from</th>
                <th>Activity to</th>
                <th>Details</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let dynamic of dynamicArray; let i = index;">    
                <td>{{ dynamic.activityFor }}</td>
                <td>{{ dynamic.activity.activityName }}</td>
                <td>{{ dynamic.fromHours }}</td>
                <td>{{ dynamic.toHours }}</td>
                <td>{{ dynamic.activityDetails }}</td>
                <td><button class="btn btn-danger" (click)="removeRow($event,i)">Remove</button></td>
            </tr>
        </tbody>
    </table>

    <label>Resources</label>
    <mat-accordion *ngIf="platforms">
        <div *ngFor="let platform of platforms">
          <mat-expansion-panel>
            <mat-expansion-panel-header>
              <mat-panel-title>
                {{ platform.platform }}
              </mat-panel-title>
            </mat-expansion-panel-header>
            <table class="table table-bordered">
              <!-- <thead>
                <tr>
                  <th>Resource Name</th>
                   <th>
                    <input type="hidden" value={{uncheckCheckbox1}} >
                    <input type="checkbox" class="form-check-input" [checked]="!uncheckCheckbox1" [(ngModel)]="selectAllFirstHalfMap[domain]" (change)="selectAllFirstHalfChanged(domain)"/>
                    First Half
                  </th>
                  <th>
                    <input type="hidden" value={{uncheckCheckbox2}}>
                    <input type="checkbox" class="form-check-input" [checked]="!uncheckCheckbox2" [(ngModel)]="selectAllSecondHalfMap[domain]" (change)="selectAllSecondHalfChanged(domain)"  />
                    Second Half
                  </th> 
                </tr>
              </thead> -->
              <tbody>
                <ng-container *ngFor="let resource of resources">
                  <tr *ngIf="resource.platform.trim()==platform.platform.trim()">
                    <td>
                      <input type="checkbox" (click)="toggle($event,resource.resourceId,platform.platformId)">
                      {{ resource.resourceName }}
                    </td>
                  <!-- <td>
                    <div *ngFor="let firstHalfObj of resource.firstHalf" class="form-check">
                      <input type="checkbox" class="form-check-input" [checked]="firstHalfObj.isPresent === '1'"
                        (change)="togglePresentValue(firstHalfObj)" />
                      <label class="form-check-label">
                        {{ firstHalfObj.activityName }} ({{ firstHalfObj.activityDetails }}) <br />
                        Time: {{ firstHalfObj.fromHours }} to {{ firstHalfObj.toHours }}
                      </label>
                      <input type="hidden" [value]="firstHalfObj.activityAllocateDetId">
                      <input type="hidden" [value]="firstHalfObj.isPresent">
                    </div>
                  </td>
                  <td>
                    <div *ngFor="let secondHalfObj of resource.secondHalf" class="form-check">
                      <input type="checkbox" class="form-check-input" [checked]="secondHalfObj.isPresent === '1'"
                        (change)="togglePresentValue(secondHalfObj)" />
                      <label class="form-check-label">
                        {{ secondHalfObj.activityName }} ({{ secondHalfObj.activityDetails }}) <br />
                        Time: {{ secondHalfObj.fromHours }} to {{ secondHalfObj.toHours }}
                      </label>
                      <input type="hidden" [value]="secondHalfObj.activityAllocateDetId">
                      <input type="hidden" [value]="secondHalfObj.isPresent">
                    </div>
                  </td> -->
                
                  </tr>
                </ng-container>
              </tbody>
            </table>
          </mat-expansion-panel>
        </div>
      </mat-accordion>
    <button class="btn btn-success mt-2" (click)="submitForm()">Submit</button>
</div>
